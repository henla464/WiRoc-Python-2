1) Ladda ner WiRoc från:
	Hårdvaruversion V4Rev1: https://monitor.wiroc.se/outher_resources/Armbian-unofficial_25.11.0-trunk_Nanopiair_trixie_current_6.12.51_HW_V4Rev1.img.xz

2) Skriv WiRoc-imagen till SD kortet
	- med t.ex Balena etcher

3) Skapa ett Wifi nätverk med SSID: WiRoc och lösenord: WiRocWiRoc
	- Man kan packa upp imagen och ändra i /root/.not_logged_in_yet för att ändra SSID och lösenord men enklast är nog bara att dela ut wifinätverket på mobilen.

4) Frivilligt... För att kunna följa vad som händer under installationen anslut till serial konsolen med en USB-serial adapter 

5) Stoppa i SD-kortet och starta WiRoc

6) Vänta ca 40 min på att installationen ska bli klar. När den är klar så startat den om och efter det ska displayen fungera.
	- Vid starten så ansluter den först till Wifi
	- Sedan körs armbian-firstrun skriptet (modifierat jämfört med armbian standard). Detta loggar in, skapar användaren 'chip' med lösen 'chip'. Sätter lösenordet för root till 'chip'. Det genererar sedan locale, sätter tidszon etc.
	- armbian-firstrun anropar sedan provisioning.sh ( i /root ) som stänger av automatiska kernel uppdateringar, unattended uppdateringar och byter till stable package repository. Efter detta kopierar den install.sh till /chip/home och startar install.sh. 

7) Installera SD kortet till eMMC
	- Använd serie konsolen eller logga in med SSH (användarnamn chip, lösen chip)
	- Kör: sudo armbian-config --cmd STO001
		Välj sedan "Boot from eMMC - system on eMMC"
		Välj ext4 filesystem

8) Ta bort SD-kortet och starta utan det.


=============================
Older instructions
=============================

1) Download the Armbian ubuntu cli version image

2) Extract the .xz to a .img file with file roller

3) Rename the image file, prefix with WiRoc_

mv Armbian_community_25.5.0-trunk.87_Nanopiair_noble_current_6.6.72.img WiRoc_Armbian_community_25.5.0-trunk.87_Nanopiair_noble_current_6.6.72.img

4) Mount the image read/write to be able to change/add some files

gnome-disk-image-mounter --writable WiRoc_Armbian(tab)
			    

5) Copy Boot settings
Copy/overwrite the .not_logged_in_yet (from WiRoc-Python-2) to /root/.not_logged_in_yet
Copy the apikey.txt to /root/
Copy the settings.yaml to /root/  (edit it to have the versions that should be installed)

6) Compress the image with
xz -v WiRoc_Armbian(tab)

7) Flash the compressed image to SD card

8) Start WiRoc with the SD card inserted

9) WiRoc should connect to Wifi automatically, ssid WiRoc with password WiRocWiRoc
	- wait for the first boot script to finish creating the user "chip"

10) Connect with SSH, user chip, password chip
	- If it says wrong password then try to log in with user root and password 1234 (if that doesn't work try with password chip)
	- After the first boot script finished log out and log in with user chip

10.1)
	sudo apt update
10.2)
	sudo apt install armbian-config

10.3)	Change WiRocBLEVersion to WiRocBLEAPIVersion in /root/settings.yaml 
	
11.1) 
	- Disable kernel updates
		sudo armbian-config --cmd SY203
11.2)
	- Disable unattended updates
		sudo armbian-config --cmd UNAT03
11.3)
	- Switch system to stable packages repository
		sudo armbian-config --cmd SY207

12)
run the commands below to download the install script and make it executable:


wget https://raw.githubusercontent.com/henla464/WiRoc-Python-2/master/install.sh
sudo chmod ugo+x install.sh

13) Time to run the install script:
sudo ./install.sh

--------------------

14) After install script finished restart the device
sudo shutdown -r 0

--------------------
15) Log in again as user chip and run sudo armbian-config
	- Install the SD card to eMMC (select System/Storage/Install to internal storage)
	or run: sudo armbian-config --cmd STO001
		select "Boot from eMMC - system on eMMC"
		select ext4 filesystem
		
	
